# SmartFinHub Requirements Document

## 1. Application Overview

### 1.1 Application Name
SmartFinHub\n
### 1.2 Application Description
A comprehensive financial management web application designed for tracking and managing multiple financial accounts including cash, bank accounts, credit cards, and loans. The platform provides real-time balance updates, transaction recording, budget analysis, and detailed financial reporting.

### 1.3 Authentication System
- **Email Registration and Login**: Users register and login using email address only
- **Email Verification**: During registration, system sends verification code to user's email address
- Verification code is a 6-digit numeric code generated by the application's internal verification system
- User enters verification code on registration page to complete email verification
- Verification code valid for 15 minutes from generation time
- **No Third-Party Dependency**: Email verification system built into application without relying on external authentication services
- Application uses its own SMTP server configuration to send verification emails
- Verified email address serves as username for secure login
- **Forgot Password Option**: Forgot password link displayed on login page
- Password reset via email verification code
- User receives 6-digit verification code to registered email address
- After entering valid verification code, user can set new password
- Password reset verification code valid for 15 minutes
- **Change Password on Dashboard**: Password change option available in user account settings on dashboard
- User must enter current password before setting new password
- Password change confirmation sent to registered email address
\n## 2. Core Features
\n### 2.1 User Preferences
- Select default country from dropdown list
- Choose preferred currency for dashboard display
- Country and currency settings saved to user profile
- Settings apply across all dashboard views and reports

### 2.2 Account Management
\n#### 2.2.1 Account Types
- Cash accounts\n- Bank accounts
- Credit card accounts
- Loan accounts\n\n#### 2.2.2 Account Setup
- Country selection from dropdown menu
- Bank or financial institution selection based on chosen country
- **Complete bank name list available in dropdown for all supported countries**
- Dropdown includes all major banks and financial institutions for selected country
- Display bank/financial institution logo on account pages and dashboard
- Manual bank name entry option if institution not listed
- **Automatic Logo Fetching**: When bank/loan/credit card account logo is not available in the system database during account creation or editing, automatically fetch the logo from internet sources
- Fetched logos displayed on both account pages and dashboard
- System caches fetched logos for future use
- Optional account number entry (encrypted storage, only last 4 digits visible on dashboard)

#### 2.2.3 Credit Card Configuration
- **Statement Day of Month**: User inputs the day of month when credit card statement is generated (1-31)
- **Due Day of Month**: User inputs the day of month when credit card payment is due (1-31)
- **Credit Card Limit**: User inputs their own credit limit for the card
- User-defined limit stored in credit card account profile
- Statement day and due day saved to credit card account profile
- System displays statement date and due date reminders on dashboard
- Payment reminders shown on credit card account detail page
- Visual indicators for upcoming statement dates and due dates\n- **Credit Limit Alert**: System triggers alert notification when user attempts transaction that would exceed their set credit limit
- Alert displayed before transaction confirmation to prevent overspending
- Current available credit displayed on credit card account page and dashboard

#### 2.2.4 Loan Account Configuration
- Select interest rate type: Fixed or Floating
- Input total principal loan amount
- **EMI Due Day of Month**: User inputs the day of month when EMI payment is due (1-31)
- EMI due day saved to loan account profile for automatic interest calculation
- Auto-calculate EMI based on principal, interest rate, and tenure
- **EMI Payment History Entry**: During loan account creation or editing, system prompts user to provide details of every EMI payment already made:\n  - EMI Payment Date: Date when each EMI was paid
  - EMI Amount Paid: Actual amount paid for each EMI installment
- User can add multiple historical EMI payment records during account setup or editing
- **EMI Breakdown Calculation**: System automatically calculates for each EMI payment:
  - Principal Component: Portion of EMI payment applied to principal reduction
  - Interest Component: Portion of EMI payment applied to interest charges
- Calculation based on loan amount, interest rate, tenure, and payment date
- **Manual Correction of Principal and Interest**: After system calculates principal and interest breakdown for each EMI, user can manually edit and correct the principal amount and interest amount if needed
- Manual corrections allow user to adjust for any discrepancies or special payment arrangements
- System saves user-corrected values and uses them for all subsequent calculations
- Corrected values reflected in loan account statement and accrued interest calculations
- **Loan Account Statement Generation**: System generates detailed loan account statement showing:
  - Each EMI payment with date and amount
  - Principal and interest breakdown for each payment (including user corrections)
  - Running balance of outstanding principal after each payment
  - Cumulative interest paid to date
  - Remaining loan balance
- **Accurate Accrued Interest Calculation**: System calculates precise accrued interest based on:
  - Historical EMI payment records
  - Interest component extracted from each EMI (including user corrections)
  - Current outstanding principal balance
  - Interest rate and payment schedule
- Accrued interest displayed on dashboard and loan account detail page
- **Edit EMI History**: User can add, edit, or delete historical EMI payment records at any time
- User can modify principal and interest breakdown for any EMI payment record
- System recalculates principal/interest breakdown and accrued interest automatically when EMI history is modified
- **Automatic Monthly Interest Calculation and Addition**: On the EMI due day of each month, system automatically:\n  - Calculates interest for the month based on outstanding principal balance and all transactions in loan account during the month
  - Considers all payments, additional payments, and principal adjustments made during the month
  - Adds calculated monthly interest amount to the loan account balance
  - Records interest addition as a system-generated transaction in loan account statement
  - Updates total accrued interest on dashboard and loan account detail page
- Sends notification to user about monthly interest addition
- Interest calculation uses daily balance method considering all intra-month transactions
- System maintains complete audit trail of all automatic interest additions

#### 2.2.5 Floating Interest Rate Management
- Record all interest rate changes from loan inception to current date
- User can update floating interest rate at any time
- System maintains complete historical record of rate changes
- Auto-calculate total accrued interest till date
- Display accrued interest on dashboard and account detail page
- Chart visualization showing floating interest rate history over time
- **EMI Recalculation on Rate Change**: When floating interest rate is updated, system recalculates principal and interest components for all subsequent EMI payments
- Updated interest breakdown reflected in loan account statement
- Automatic monthly interest calculation uses current applicable interest rate
\n#### 2.2.6 Data Security\n- **End-to-End Encryption**: All user data encrypted in database using industry-standard AES-256 encryption algorithm
- **Zero-Knowledge Architecture**: Application creator, administrators, and database administrators have no access to decrypted user data
- **Client-Side Encryption**: All user data encrypted on client side before transmission to server
- **User-Specific Encryption Keys**: Each user's data encrypted with unique encryption key derived from user credentials using PBKDF2 key derivation function
- Encryption keys never stored on server in plain text or recoverable form
- **Comprehensive Data Encryption**: All user data stored in encrypted form including:
  - User profile information (name, email, contact details, preferences)
  - Bank account numbers and account details
  - Credit card numbers and credit card details
  - Loan account numbers and loan details
  - All transaction records (income, expenses, transfers, payments)
  - Transaction descriptions and notes
  - Budget data and budget categories
  - Account balances (current and historical)
  - EMI payment history and breakdowns
  - Interest rate history
  - Financial reports and analytics data
  - User settings and preferences
  - Session data and activity logs
- **Encryption at Rest**: All data encrypted in database storage\n- **Encryption in Transit**: All data transmission between client and server protected by TLS/SSL encryption
- **Secure Key Management**: Encryption keys derived from user password and never stored on server
- User password hashed using bcrypt before storage
- **Data Privacy Guarantee**: System architecture ensures that even database administrators, application developers, and hosting providers cannot access or view user's financial information in decrypted form
- **No Backdoor Access**: No master key or backdoor mechanism exists to decrypt user data without user credentials
- **Secure Session Management**: User sessions encrypted and protected against hijacking
- **Automatic Logout**: Sessions automatically expire after period of inactivity
- **Data Isolation**: Each user's encrypted data completely isolated from other users\n- **Audit Trail Encryption**: All system logs and audit trails encrypted to protect user activity information

#### 2.2.7 Account Modification
- Edit any account information at any time
- Delete accounts with user confirmation
\n#### 2.2.8 External App Integration
- **Bank App Quick Link**: Each bank account card on dashboard displays clickable link icon to open the associated bank's mobile app or web banking portal
- Link automatically configured based on selected bank during account creation
- Clicking link redirects user to bank's official app (if installed) or web banking login page
- **User Selection for Missing Bank App Links**: If quick link for any bank app is not available in system database, application prompts user to select from list of existing available apps
- System displays dropdown or selection interface showing all available bank apps in database
- User selects appropriate bank app link from the available options
- **Store User-Selected App Link**: System saves user's selected bank app link association for the specific bank account
- User-selected app link stored in user's account profile for future use
- Next time user accesses the same bank account, system automatically uses the previously selected app link
- User can change or update the selected app link at any time through account settings
- **Automatic App Link Update from App Store**: When user installs or opens the appropriate banking or payment app from Google Play Store or Apple App Store:\n  - System detects the app installation or opening event
  - System automatically retrieves the official app store link for the installed app
  - System updates the stored app link in user's account profile with the new app store link
  - Updated link saved for future use and displayed on dashboard
  - System uses the updated link for all subsequent quick access attempts
  - Automatic update applies to both bank apps and UPI/payment apps
- **Automatic Bank App Logo Fetching**: When bank app logo is not available in system database, automatically fetch the official bank app logo from internet sources
- Fetched bank app logos displayed on account cards and quick access sections
- System caches fetched bank app logos for future use
- **UPI App Integration**: Dashboard displays quick access links to popular UPI payment apps based on user's selected country\n- For India: Links to PhonePe, Google Pay, Paytm, BHIM UPI, and other major UPI apps
- For other countries: Links to country-specific popular payment apps (e.g., Venmo for USA, Alipay for China, PayPal for global)
- **Automatic UPI App Logo Fetching**: When UPI/payment app logo is not available in system database, automatically fetch the official app logo from internet sources
- Fetched UPI app logos displayed as icon buttons in dashboard header or dedicated quick access section
- System caches fetched UPI app logos for future use\n- UPI app links displayed as icon buttons in dashboard header or dedicated quick access section
- Clicking UPI app link opens the respective payment app (if installed) or redirects to app download page
- System detects user's country from account settings to display relevant payment app options
- User can customize which UPI/payment app links to display in dashboard settings
\n### 2.3 Transaction Management\n
#### 2.3.1 Transaction Types
- Income transactions
- Expense transactions\n- Cash withdrawals (from bank account or credit card)
- Bank-to-bank transfers
- Loan payments
- **Credit card repayment transactions**
- System-generated interest additions (for loan accounts)
\n#### 2.3.2 Transaction Processing Logic
- **Credit card accounts displayed as negative balances (liabilities)**
- **Expense transactions from credit card increase card balance (more negative, higher liability)**
- **Cash withdrawals from credit card increase card balance (more negative, higher liability)**
- Loan accounts displayed as negative balances\n- Payments to loan accounts decrease loan balance (less negative)\n- **Credit Card Repayment Transaction**: New transaction type for paying credit card bills
  - User selects source bank account from which repayment is made
  - User selects target credit card account being paid
  - User enters repayment amount
  - System simultaneously:\n    - Reduces source bank account balance by repayment amount
    - Reduces credit card liability (makes balance less negative) by repayment amount
  - Transaction recorded in both bank account and credit card account statements
  - Repayment transaction clearly labeled in transaction history
- During expense transaction entry, display remaining budget balance for the selected budget category for current month
- Show budget balance information prominently before transaction confirmation to help user make informed spending decisions
- Dashboard auto-updates after each transaction\n- Screen refreshes automatically after transaction entry\n- **Automatic Interest Transaction**: On EMI due day, system automatically creates interest transaction in loan account
- Interest transaction increases loan balance (more negative)
- Interest transaction marked as system-generated and non-editable by user
- All loan account transactions considered in monthly interest calculation
\n#### 2.3.3 Credit Card Transaction with EMI Option
- **EMI Payment Option**: During credit card transaction entry, system prompts user to select payment method\n- Payment options: Full Payment or EMI (Equated Monthly Installment)\n- **EMI Configuration**: If EMI option selected, user provides:
  - EMI Duration: Number of months for installment plan
  - Bank EMI Charges: Processing fee or interest charges applied by bank
- **EMI Calculation**: System automatically calculates monthly EMI amount based on transaction amount, duration, and bank charges\n- **Statement Amount Calculation**: System calculates EMI amount to be included in monthly credit card statement
- **Dashboard Display**: EMI details displayed on dashboard including:
  - Total EMI amount
  - Monthly installment amount
  - Remaining EMI tenure
  - Total bank charges
- **Account Page Display**: Credit card account page shows:
  - Active EMI transactions list
  - EMI payment schedule
  - Next EMI due amount
  - Outstanding EMI balance
- EMI transactions tracked separately from regular credit card balance
- Monthly EMI amount automatically added to credit card statement on statement generation day
\n#### 2.3.4 Transaction Modification
- Edit any transaction record\n- Delete transactions with automatic balance recalculation
- System-generated interest transactions cannot be edited or deleted by user
- Credit card repayment transactions can be edited or deleted with automatic recalculation of both bank and credit card balances
\n### 2.4 Dashboard Display

#### 2.4.1 Tab-Based Dashboard Structure
- **Dashboard organized into multiple tabs for better content organization and navigation**
- **Tab 1 - Overview**: Financial summary, account cards, and quick access to payment apps\n- **Tab 2 - Analytics**: Visual charts including pie charts for balance distribution and expense breakdown, line charts for interest rate history
- **Tab 3 - Cash Flow**: Monthly cash flow projection with opening balance, income, expenses, and credit card dues breakdown
- **Tab 4 - Accounts**: Detailed view of all accounts with quick statement access
- User can switch between tabs by clicking on tab headers
- Active tab highlighted with visual indicator
- Each tab loads relevant content dynamically\n- Tab selection persists during user session

#### 2.4.2 Financial Summary (Overview Tab)
- Current Assets: Sum of Cash and Bank Account balances
- Current Liabilities: Sum of Credit Card balances only
- Liquid Assets: Sum of Cash and Bank Account balances\n- Loan accounts excluded from Current Liabilities calculation
- Loan accounts excluded from Liquid Assets calculation
- Total accrued interest displayed for each loan account
- Monthly interest additions reflected in real-time
\n#### 2.4.3 Monthly Cash Flow Projection (Cash Flow Tab)
- **Opening Balance Display**: Dashboard shows combined opening balance of Cash and Bank accounts for current month
- **Income Transactions Addition**: System adds all income transactions recorded from start of month till current date to opening balance
- **Month-to-Date Expenses Deduction**: System deducts all expenses incurred from start of month till current date\n- **Remaining Budget Deduction**: System deducts remaining budgeted expenses for the month (total monthly expense budget minus expenses already incurred)
- **Expected Balance Calculation**: System calculates and displays expected balance after accounting for income received and remaining budgeted expenses
- **Credit Card Dues Breakdown**: System displays upcoming credit card payment due amounts separately for each credit card account:\n  - Identifies the next upcoming due date for each credit card
  - Shows credit card name/bank with logo
  - Displays due date for each card
  - Shows payment due amount for each card separately
  - Lists all credit cards with upcoming dues in chronological order by due date
  - Deducts each credit card due amount individually from expected balance
- **Final Projected Balance**: Dashboard prominently displays final projected balance showing expected cash and bank account balance after all income, planned expenses and all credit card payments\n- Calculation formula: Opening Balance + Income Till Date - Expenses Till Date - Remaining Budget - (Sum of All Individual Credit Card Due Amounts) = Final Projected Balance
- Visual indicator showing positive (green) or negative (red) projected balance
- Breakdown view available showing each component of the calculation including individual credit card dues

#### 2.4.4 Visual Analytics (Analytics Tab)
- 3D pie chart showing Cash and Bank Account balance distribution
- 3D pie chart showing Expenses breakdown by category
- Line chart displaying Floating Interest Rate history for loan accounts
\n#### 2.4.5 Account Display Cards (Overview Tab & Accounts Tab)
- Bank or financial institution logo\n- Account type indicator\n- Last 4 digits of account number only
- Real-time current balance\n- For loan accounts: Total accrued interest till date including automatic monthly interest additions
- **For credit card accounts**:
  - Display next statement date and payment due date as reminders
  - Show user-defined credit limit
  - Display available credit remaining
  - Show active EMI transactions count
  - Display total outstanding EMI balance
  - Show next EMI installment amount and due date
- Visual indicators highlighting upcoming statement dates and due dates within7 days
- **For loan accounts**: Visual indicator showing next EMI due date and automatic interest calculation date
- **Bank App Quick Access Icon**: Clickable icon on each bank account card to open bank's mobile app or web banking portal\n\n#### 2.4.6 Account Quick View (Accounts Tab)
- **Click-to-View Statement**: When user clicks on any account card on dashboard, system displays popup window showing last 90 days statement for that account
- Popup includes transaction history, balance changes, and account activity for the 90-day period
- **For loan accounts**: Popup displays detailed EMI payment history with principal and interest breakdown for each payment within the 90-day period, including automatic monthly interest additions
- **For credit card accounts**: Popup displays all transactions including expenses, withdrawals, and repayment transactions for the 90-day period
- Statement popup available for all account types: Cash, Bank, Credit Card, and Loan accounts
- Close button to dismiss popup and return to dashboard

#### 2.4.7 Quick Access to Payment Apps (Overview Tab)
- **UPI/Payment App Links Section**: Dedicated section in dashboard header or sidebar displaying quick access icons for popular payment apps
- Icons displayed based on user's country selection
- Clicking icon opens respective payment app or redirects to download page
- User can customize displayed payment apps in settings
\n### 2.5 Budget Management
- Input monthly budgeted income amounts
- Input monthly budgeted expense amounts by category
- Compare actual expenses against budgeted amounts
- Display budget variance (over/under budget) on dashboard
- Monthly budget tracking and analysis
- Editing or saving budget automatically triggers immediate update of Budget vs. Actual analysis
- Real-time recalculation of budget variance when budget values are modified
- Updated Budget vs. Actual analysis immediately reflected on dashboard and reports
- System recalculates remaining budget for each category after budget modification
\n### 2.6 Reporting\n- Transaction history reports with date range filters
- Income and expense summary reports
- Account balance reports across all accounts
- Budget vs. actual analysis reports
- **Credit Card Monthly Statement Report**: Reports section includes credit card statement view with month selector\n- User selects specific month from dropdown to view credit card statement for that period
- Statement displays all transactions, payments, repayments, EMI installments, interest charges, and balance for selected month
- Statement shows opening balance, closing balance, total spending, repayments made, and payment due information
- **EMI Transaction Reports**: Detailed reports showing all EMI transactions, payment schedules, and outstanding balances
- **Credit Card Repayment Reports**: Detailed reports showing all credit card repayment transactions with source bank account, target credit card, repayment amount, and date
- **Loan Account Statement Report**: Comprehensive loan statement report included in Reports section showing:\n  - **Historical EMI Payments**: Complete record of all EMI payments already made with:\n    - Payment date for each EMI
    - Total EMI amount paid
    - Principal payment component (including user corrections)
    - Interest payment component (including user corrections)
    - Outstanding principal balance after each payment
  - **Automatic Monthly Interest Additions**: Complete record of all system-generated monthly interest transactions with:
    - Interest calculation date
    - Interest amount added\n    - Outstanding balance after interest addition
    - Interest rate applied for calculation
  - **Future EMI Payments**: Scheduled upcoming EMI payments with:
    - Projected payment dates
    - Estimated EMI amounts
    - Projected principal payment bifurcation
    - Projected interest payment bifurcation\n    - Expected outstanding balance after each future payment
  - **Additional EMI Payments**: Any extra or additional EMI payments made beyond regular schedule with complete principal and interest bifurcation
  - Cumulative interest paid to date
  - Total accrued interest\n  - Remaining loan tenure
  - Complete amortization schedule showing full loan lifecycle
- Date range filter for loan statement reports
- Export reports functionality\n\n## 3. Design Style\n
### 3.1 Color Scheme
- Primary color: Deep blue (#1E3A8A) conveying trust and financial stability
- Secondary color: Emerald green (#10B981) for positive balances and income indicators
- Accent color: Amber (#F59E0B) for alerts and important notifications
- Negative indicator: Coral red (#EF4444) for liabilities and overspending
\n### 3.2 Visual Details
- Card-based layout with subtle drop shadows for depth
- Rounded corners (8px radius) for modern, approachable aesthetic
- Smooth hover transitions on interactive elements
- Clear iconography for transaction types and account categories
- Consistent spacing and padding throughout interface
- Tab headers with clear labels and active state indicators
- Smooth tab switching animations for better user experience

### 3.3 Layout Structure
- Grid-based dashboard for account cards with responsive columns
- Side navigation panel for main sections: Accounts, Transactions, Reports, Budget, Settings
- **Horizontal tab navigation within dashboard for switching between Overview, Analytics, Cash Flow, and Accounts tabs**
- Responsive design adapting seamlessly to desktop, tablet, and mobile screens
- Clear visual hierarchy with prominent balance displays and chart visualizations
- Sticky header for easy navigation access

## 4. Reference Images
- IMG_7739.jpeg: Credit card repayment transaction form showing source bank account, target credit card, repayment amount, date, and description fields